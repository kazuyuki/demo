<!DOCTYPE html>
<html>
 <head>
 <meta charset="UTF-8">
 <title>アニメーション - random work</title>
 <script type="text/javascript">
 window.onload = function(){

	//コンテキストの取得
	var canvas = document.getElementById("can");
	if(!canvas || !canvas.getContext) return false;
	var ctx = canvas.getContext("2d");
	ctx.fillStyle = "#ceceff";//描画色を指定
     
	//options
	var point = {x:300,y:250};	//座標
	var timer;			//タイマー
	var delay = 0;			//タイマーを実行する間隔
	var count= 0;
	//clearTimeout(timer);

	//繰り返し描画を行う関数。
	var draw = function(){
		ctx.beginPath();
		for (var i = 0; i<300000; i++){
			//x, y を -1 から 1 の間でランダムに変化させる
			point.x += Math.floor( Math.random() * (2 + 1) ) - 1;
			point.y += Math.floor( Math.random() * (2 + 1) ) - 1;
			if (point.x < 0) {
				point.x = 600;
			}
			else if (point.x > 600) {
				point.x = 0;
			}
			if (point.y < 0) {
				point.y = 600;
			}
			else if (point.y > 500) {
				point.y = 0;
			}
			ctx.fillRect(point.x,point.y,1,1);//pointの座標に描画
		}
		ctx.closePath();
		ctx.fill();
	}

	var loop = function(){
		//描画
		//ctx.clearRect(0,0,600,500);	//一度canvasをクリア
		draw();
		timer = setTimeout(loop,delay);
	}

	loop();
}
</script>

<style type="text/css" media="screen">
 div#stage{
     width:600px;
     height:500px;
     position:absolute;
     top:50%;
     left:50%;
     margin-left:-300px;
     margin-top:-250px;
     background:#000;
 }
</style>

 </head>

 <body>
 <div id="stage">
 <canvas id="can" width="600" height="500"></canvas>
 </div>
 </body>
 </html> 
